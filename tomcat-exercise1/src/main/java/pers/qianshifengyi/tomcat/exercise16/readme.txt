
当关闭的时候,虚拟机会有以下两个步骤:
1、虚拟机启动所有注册的关闭钩子。关闭钩子是实现在 Runtime 上面 注册的线程。所有的关闭钩子会被同时执行直到完成。
2. 虚拟机调用所有的 被调用的 finalizers

一个关闭钩 子是 java.lang.Thread 类的子类,可以如下创建一个关闭钩子:
· 写一个类继承 Thread 类
· 提供你的实现类中的run方法。该方法是应用程序被关闭的时 候要提交的代码,无论是正常退出还是非正常退出。
· 在你的应用程序中,初始化一个关闭钩子
· 在当前的 Runtime 上使用 addShutdownHook 方法来注册该关闭 钩子。






